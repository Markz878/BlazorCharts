<svg class="chart" width="100%" height="90%" viewBox="0 0 @Width @Height">
    <text x="@(Width/2)" y="15" font-size="16px" text-anchor="middle">@Title</text>
    <g>
        @foreach (double value in YAxis)
        {
            <line x1="@MarginLeft" y1="@GetYCoordinate(value)" x2="@(Width - MarginRight)" y2="@GetYCoordinate(value)" style="stroke:#e0e0e0;stroke-width:1" />
        }
    </g>
    <g>
        @foreach(double value in YAxis)
        {
            <text>
                <text x="@(MarginLeft-10)" y="@GetYCoordinate(value)" font-size="12px" text-anchor="end" dominant-baseline="middle">@value</text>
            </text>
        }
    </g>
    <g>
        @foreach((StackedBarColumn p, int index) in Data.Select((x,i)=>(x,i)))
        {
            <text>
                <text x="@GetXCoordinate(index)" y="@Height" font-size="12px" text-anchor="middle">@p.Title</text>
            </text>
        }
    </g>
    <g>
        @foreach((StackedBarColumn p, int itemIndex) in Data.Select((x,i)=>(x,i)))
        {
            double sum = 0;
            @foreach((StackedBarItem item, int dataIndex) in p.Values.Select((x,i)=>(x,i)))
            {
                sum += item.Value;
                <rect x="@(GetXCoordinate(itemIndex)-GetBarWidth()/2)" y="@GetYCoordinate(sum)" height="@GetBarHeight(item.Value)" width="@GetBarWidth()" stroke="black" stroke-width="1" fill="@item.Color" class="data-bar" @onmouseover="(e)=>MouseOver(e, p, dataIndex)" @onmouseout="(e)=>MouseLeave(e, p)"/>
            }
        }
    </g>
    @if (showTooltip && tooltipProperties is not null)
    {
        <g>
            <rect x="@tooltipX" y="@tooltipY" width="@tooltipWidth" height="@tooltipHeight" class="scatter-tooltip"/>
            @foreach((string text, int index) in tooltipProperties)
            {
                <text>
                    <text x="@(tooltipX+10)" y="@(tooltipY+20+index*15)" class="tooltip-text">@text</text>
                </text>
            }
        </g>
    }
</svg>
